---
- name: Create collectd script directory
  file: path="{{swift_collectd_script_dir}}" owner=root mode=0755 state=directory

- name: Drop monitoring scripts
  file: path="{{swift_collectd_script_dir}}/{{item}}" src={{item}} owner=root mode=0755
  with_items: swift_collectd_scripts

- name: Configure monitoring scripts
  template: dest=/etc/collectd/conf.d/{{swift_collectd_exec_conf}} src=exec.conf.j2 owner=root mode=644
  notify: restart collectd

